<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0;
        }
        #box{
            width: 500px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: red;
            line-height: 50px;
        }
    </style>
</head>
<body>
    <canvas id="can" height="500px" width="500px"></canvas>
    <div id="box"></div>
    <script>
        var can = document.getElementById('can');
        var oBox = document.getElementById('box');
        var ctx = can.getContext('2d');
        var timer, angle = 0;
        CanvasRenderingContext2D.prototype.selector = function(x,y,r,sDeg,eDeg) {
            // 圆心坐标 半径 起始角度 终止角度
            this.save();
            this.beginPath();
            this.moveTo(x,y);   //将圆心移到(x,y)上
            // 角度*π/180 = 弧度 
            // true为逆时针旋转,false为顺时针旋转
            this.arc(x,y,r,sDeg*Math.PI/180,eDeg*Math.PI/180,false);
            this.closePath();
            this.restore();
            return this;
        }
        ctx.fillStyle = 'red';
        // angle(角度) / 360 = per / 100
        // per = angle * 5 / 18
        timer = setInterval(function(){
            angle += 5;
            ctx.selector(250,250,100,0,angle).fill();
            per = (angle * 5/18).toFixed(2);
            oBox.innerHTML = '加载中:' + per + '%';
            if(angle == 360) {
                clearInterval(timer);
                oBox.innerHTML = '加载完成!';
            }
        },200);
        
    </script>
</body>
</html>